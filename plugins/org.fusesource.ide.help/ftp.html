<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>FTP/SFTP</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Plugins for Eclipse"><link rel="up" href="RiderFileEptRef.html" title="File Endpoints"><link rel="prev" href="file.html" title="File"><link rel="next" href="hdfs.html" title="HDFS"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry"><a name="ftp"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>FTP/SFTP &#8212; provides access to remote file systems over the FTP and SFTP
      protocols</p></div><div class="refsection"><a name="d0e25222"></a><h2>Overview</h2><p>This component provides access to remote file systems over the FTP and SFTP
    protocols.</p><p>This component uses two different libraries for the actual FTP work. FTP and 
      FTPS uses <a class="link" href="http://commons.apache.org/net/" target="_top">Apache Commons Net</a> while 
      SFTP uses <a class="link" href="http://www.jcraft.com/jsch/" target="_top">JCraft JSCH</a>.</p></div><div class="refsection"><a name="d0e25235"></a><h2>URI format</h2><p>The URI format for an FTP endpoint is:</p><pre class="programlisting">ftp://[<em class="replaceable"><code>username</code></em>@]<em class="replaceable"><code>hostname</code></em>[:<em class="replaceable"><code>port</code></em>]/<em class="replaceable"><code>directoryname</code></em>[?<em class="replaceable"><code>options</code></em>]
ftps://[<em class="replaceable"><code>username</code></em>@]<em class="replaceable"><code>hostname</code></em>[:<em class="replaceable"><code>port</code></em>]/<em class="replaceable"><code>directoryname</code></em>[?<em class="replaceable"><code>options</code></em>]</pre><p>The URI format for an SFTP endpoint is:</p><pre class="programlisting">sftp://[<em class="replaceable"><code>username</code></em>@]<em class="replaceable"><code>hostname</code></em>[:<em class="replaceable"><code>port</code></em>]/<em class="replaceable"><code>directoryname</code></em>[?<em class="replaceable"><code>options</code></em>]</pre><p>If no <code class="code">username</code> is provided, then an anonymous login is attempted.</p><p>If no <code class="code">port</code> number is provided, Apache Camel will provide default values 
    according to the protocol:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ftp = 21</p></li><li class="listitem"><p>sftp = 22</p></li><li class="listitem"><p>ftps = 21</p></li></ul></div></div><div class="refsection"><a name="d0e25311"></a><h2>Options</h2><p><a class="xref" href="ftp.html#FTPRefOptTbl" title="Table&nbsp;13.&nbsp;FTP options">Table&nbsp;13, &#8220;FTP options&#8221;</a> lists the options for the FTP component.</p><div class="table"><a name="FTPRefOptTbl"></a><p class="title"><b>Table&nbsp;13.&nbsp;FTP options</b></p><div class="table-contents"><table summary="FTP options" width="100%" border="1"><colgroup><col width="25%"><col width="25%"><col width="25%"><col width="25%"></colgroup><thead><tr><th>Name</th><th>Supported Protocol</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="option">password</code></td><td>FTP, FTPS, SFTP</td><td><code class="literal">null</code>
        </td><td> Specifies the password to use to log in to the remote file system. </td></tr><tr><td><code class="option">binary</code></td><td>FTP, FTPS, SFTP</td><td><code class="literal">false</code></td><td>Specifies the if the files should be treated as binary data.</td></tr><tr><td><code class="option">disconnect</code></td><td>FTP, FTPS, SFTP</td><td><code class="literal">false</code></td><td>Whether or not to disconnect from remote FTP
          server right after use. Can be used for both consumer and producer. Disconnect will only
          disconnect the current connection to the FTP server. If you have a consumer which you want
          to stop, then you need to stop the consumer/route instead. </td></tr><tr><td><code class="option">localWorkDirectory</code></td><td>FTP, FTPS, SFTP</td><td><code class="literal">null</code>
        </td><td> When consuming, a local work directory can be used to store the remote file content
          directly in local files, to avoid loading the content into memory. This is beneficial, if
          you consume a very big remote file and thus can conserve memory. See below for more
          details. </td></tr><tr><td><code class="option">passiveMode</code></td><td>FTP</td><td><code class="literal">false</code></td><td>Specifies whether to use passive mode
          connections.</td></tr><tr><td><code class="option">securityProtocol</code></td><td>FTPS</td><td><code class="literal">TLS</code></td><td>
          <p>Sets the underlying security protocol.
            The following values are defined: <code class="literal">TLS</code>: Transport Layer Security
              <code class="literal">SSL</code>: Secure Sockets Layer </p>
        </td></tr><tr><td><code class="option">disableSecureDataChannelDefaults</code></td><td>FTPS</td><td><code class="literal">false</code></td><td>Whether or not to disable using
          default values for <code class="literal">execPbsz</code> and <code class="literal">execProt</code> when using
          secure data transfer. You can set this option to <code class="literal">true</code> if you want to be
          in absolute full control what the options <code class="literal">execPbsz</code> and
            <code class="literal">execProt</code> should be used. </td></tr><tr><td><code class="option">execProt</code></td><td>FTPS</td><td><code class="literal">null</code>
        </td><td>
          <p>Will by default use option
              <code class="literal">P</code> if secure data channel defaults hasn't been disabled. Possible
            values are: <code class="literal">C</code>: Clear <code class="literal">S</code>: Safe (SSL protocol only)
              <code class="literal">E</code>: Confidential (SSL protocol only) <code class="literal">P</code>: Private
          </p>
        </td></tr><tr><td><code class="option">execPbsz</code></td><td>FTPS</td><td><code class="literal">null</code></td><td>This option specifies the buffer
          size of the secure data channel. If option <code class="literal">useSecureDataChannel</code> has
          been enabled and this option has not been explicit set, then value <code class="literal">0</code> is
          used. </td></tr><tr><td><code class="option">isImplicit</code></td><td>FTPS</td><td><code class="literal">false</code>
        </td><td>Specifies if the security mode is implicit.</td></tr><tr><td><code class="option">knownHostsFile</code></td><td>SFTP</td><td><code class="literal">null</code>
        </td><td>Sets the <code class="literal">known_hosts</code>
          file, so that the SFTP endpoint can do host key verification. </td></tr><tr><td><code class="option">privateKeyFilePassphrase</code></td><td>SFTP</td><td><code class="literal">null</code>
        </td><td>Set the private key file passphrase to that
          the SFTP endpoint can do private key verification. </td></tr><tr><td><code class="option">privateKeyFilePassphrase</code></td><td>SFTP</td><td><code class="literal">null</code>
        </td><td>Set the private key file passphrase to that
          the SFTP endpoint can do private key verification. </td></tr><tr><td><code class="option">strictHostKeyChecking</code></td><td>SFTP</td><td><code class="literal">no</code>
        </td><td>Sets whether to use strict host key checking. Possible values are: <code class="literal">no</code>,
            <code class="literal">yes</code> and <code class="literal">ask</code>. <code class="literal">ask</code> does not make
          sense to use as Camel cannot answer the question for you as its meant for human
          intervention.</td></tr><tr><td><code class="option">maximumReconnectAttempts</code></td><td>FTP, FTPS, SFTP</td><td><code class="literal">3</code></td><td> Specifies the maximum reconnect attempts Apache Camel performs
                            when it tries to connect to the remote FTP server.
                            Use 0 to disable this behavior. </td></tr><tr><td><code class="option">reconnectDelay</code></td><td>FTP, FTPS, SFTP</td><td> <code class="literal">1000</code> </td><td> Delay in milliseconds Apache Camel will wait before performing a
                            reconnect attempt. </td></tr><tr><td><code class="option">connectTimeout</code></td><td>FTP, FTPS, SFTP</td><td><code class="literal">10000</code></td><td>Specifies the connect timeout in milliseconds.</td></tr><tr><td><code class="option">soTimeout</code></td><td>FTP, FTPS</td><td><code class="literal">null</code></td><td>Specifies the <code class="literal">SocketOptions.SO_TIMEOUT</code> value in 
        milliseconds.</td></tr><tr><td><code class="option">timeout</code></td><td>FTP, FTPS</td><td><code class="literal">30000</code></td><td>Specifies the data timeout in milliseconds.</td></tr><tr><td><code class="option">throwExceptionOnConnectFailed</code></td><td>FTP, FTPS, SFTP</td><td><code class="literal">false</code></td><td>Specifies whether or not to thrown an exception if a
          successful connection and login could not be establish. This allows a custom
            <code class="literal">pollStrategy</code> to deal with the exception, for example to stop the
          consumer or the likes. </td></tr><tr><td><code class="option">siteCommand</code></td><td>FTP, FTPS</td><td><code class="literal">null</code>
        </td><td>To execute site commands after successful login. Multiple site commands
          can be separated using a new line character (\n). Use <code class="literal">help site</code> to see
          which site commands your FTP server supports. </td></tr><tr><td><code class="option">stepwise</code></td><td>FTP, FTPS, SFTP</td><td><code class="literal">true</code></td><td>When consuming directories, specifies whether or not to use stepwise mode for traversing
          the directory tree. Stepwise means that it will CD one directory at a time.</td></tr><tr><td><code class="option">ftpClient</code></td><td>FTP, FTPS</td><td><code class="literal">null</code></td><td>Allows you to use a custom
            <code class="literal">org.apache.commons.net.ftp.FTPClient</code> instance. </td></tr><tr><td><code class="option">ftpClientConfig</code></td><td>FTP, FTPS</td><td><code class="literal">null</code></td><td>Allows you to use a custom
            <code class="literal">org.apache.commons.net.ftp.FTPClientConfig</code> instance. </td></tr><tr><td><code class="option">ftpClient.trustStore.file</code></td><td>FTPS</td><td><code class="literal">null</code></td><td>Sets the trust store file, so that the FTPS
          client can look up for trusted certificates. </td></tr><tr><td><code class="option">ftpClient.trustStore.type</code></td><td>FTPS</td><td><code class="literal">JKS</code></td><td>Sets the trust store type. </td></tr><tr><td><code class="option">ftpClient.trustStore.algorithm</code></td><td>FTPS</td><td><code class="literal">SunX509</code></td><td>Sets the trust store algorithm. </td></tr><tr><td><code class="option">ftpClient.trustStore.password</code></td><td>FTPS</td><td><code class="literal">null</code></td><td>Sets the trust store password. </td></tr><tr><td><code class="option">ftpClient.keyStore.file</code></td><td>FTPS</td><td><code class="literal">null</code>
        </td><td>Sets the key store file, so that the FTPS
          client can look up for the private certificate. </td></tr><tr><td><code class="literal">ftpClient.keyStore.type</code>
        </td><td>FTPS</td><td><code class="literal">JKS</code>
        </td><td>Sets the key store type. </td></tr><tr><td><code class="literal">ftpClient.keyStore.algorithm</code>
        </td><td>FTPS</td><td><code class="literal">SunX509</code>
        </td><td>Sets the key store algorithm. </td></tr><tr><td><code class="literal">ftpClient.keyStore.password</code>
        </td><td>FTPS</td><td><code class="literal">null</code>
        </td><td>Sets the key store password. </td></tr><tr><td><code class="literal">ftpClient.keyStore.keyPassword</code>
        </td><td>FTPS</td><td><code class="literal">null</code>
        </td><td>Sets the private key password. </td></tr></tbody></table></div></div><br class="table-break"></div><div class="refsection"><a name="d0e25793"></a><h2>Apache Commons FTP options</h2><p>The FTP and FTPS protocols can support additional configuration options provided by 
      the Apache Commons FTP layer used to implement them. To specify these additional options you 
      use the <code class="literal">ftpClient.</code> or <code class="literal">ftpClientConfig.</code> prefix. The prefixes 
    correspond to the Apache Commons <code class="classname">FTPClient</code> and the Apache Commons 
      <code class="classname">FTPClientConfig</code> objects.</p><p>If you do not like having many and long configuration in the URL you can configure the 
      <code class="literal">ftpClient</code> or the <code class="literal">ftpClientConfig</code> in the Spring 
      configuration as shown in <a class="xref" href="ftp.html#FTPRefXMLConfigEx" title="Example&nbsp;4.&nbsp;Configuring the FTP client in XML">Example&nbsp;4, &#8220;Configuring the FTP client in XML&#8221;</a>.</p><div class="example"><a name="FTPRefXMLConfigEx"></a><p class="title"><b>Example&nbsp;4.&nbsp;Configuring the FTP client in XML</b></p><div class="example-contents"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"myConfig"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.commons.net.ftp.FTPClientConfig"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"lenientFutureDates"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"true"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"serverLanguageCode"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"fr"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>
...
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"myroute"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"ftp://foo@myserver?password=secret&amp;ftpClientConfig=#myConfig"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"bean:foo"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
  ...
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong>
...</pre></div></div><br class="example-break"><p>See the documentation of the <a class="link" href="http://commons.apache.org/net/api/org/apache/commons/net/ftp/FTPClientConfig.html" target="_top">Apache Commons FTP FTPClientConfig</a> for possible options and more details. And as
      well for <a class="link" href="http://commons.apache.org/net/api/org/apache/commons/net/ftp/FTPClient.html" target="_top">Apache
        Commons FTP FTPClient</a>.</p></div><div class="refsection"><a name="d0e25834"></a><h2>File endpoint options</h2><p>Many of the file endpoint options also apply to the FTP/SFTP endpoints. See 
      <span class="olink">????</span>.</p></div><div class="refsection"><a name="d0e25841"></a><h2>Message headers</h2><p>The following message headers can be used to affect the behavior of the component:</p><div class="table"><a name="d0e25846"></a><p class="title"><b>Table&nbsp;14.&nbsp;FTP message headers</b></p><div class="table-contents"><table summary="FTP message headers" width="100%" border="1"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th>Header</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">CamelFileName</code>
        </td><td> Specifies the output file name (relative to the endpoint directory) to be used for the
          output message when sending to the endpoint. If this is not present and no expression
          either, then a generated message ID is used as the filename instead. </td></tr><tr><td><code class="literal">CamelFileNameProduced</code>
        </td><td> The actual absolute filepath (path + name) for the output file that was written. This
          header is set by Apache Camel and its purpose is providing end-users the name of the file that
          was written. </td></tr><tr><td><code class="literal">CamelFileBatchIndex</code>
        </td><td>Current index out of total number of files being consumed in this batch. </td></tr><tr><td><code class="literal">CamelFileBatchSize</code>
        </td><td> Total number of files being consumed in this batch. </td></tr><tr><td><code class="literal">CamelFileHost</code></td><td> The remote hostname. </td></tr><tr><td><code class="literal">CamelFileLocalWorkPath</code>
        </td><td> Path to the local work file, if local work directory is used. </td></tr></tbody></table></div></div><br class="table-break"></div><div class="refsection"><a name="d0e25898"></a><h2>Related topics</h2><table border="0" summary="Simple list" class="simplelist"><tr><td><span class="olink">????</span></td></tr><tr><td><a class="link" href="http://commons.apache.org/net/" target="_top">Apache Commons Net</a></td></tr><tr><td><a class="link" href="http://commons.apache.org/net/api/org/apache/commons/net/ftp/FTPClientConfig.html" target="_top">Apache Commons FTP FTPClientConfig</a></td></tr><tr><td><a class="link" href="http://commons.apache.org/net/api/org/apache/commons/net/ftp/FTPClient.html" target="_top">Apache Commons FTP FTPClient</a></td></tr><tr><td><a class="link" href="http://www.jcraft.com/jsch/" target="_top">JCraft JSCH</a></td></tr></table></div></div></body></html>
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>HTTP4</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Plugins for Eclipse"><link rel="up" href="RiderHTTPEptRef.html" title="HTTP Endpoints"><link rel="prev" href="http.html" title="HTTP"><link rel="next" href="jetty.html" title="Jetty"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry"><a name="http4"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>HTTP4 &#8212; provides endpoints for consuming external HTTP resources using Apache HttpClient 4.x</p></div><div class="refsection"><a name="d0e27985"></a><h2>Overview</h2><p>The HTTP4 component provides HTTP based endpoints for consuming external HTTP resources 
    as a client to call external servers using HTTP.</p><p>The HTTP4 component can only send messages to external resources. It should never be used 
      as input into a route. To expose an HTTP endpoint via a HTTP server as input to a route, you 
      can use the <span class="olink">Jetty Component</span>.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.gif"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>HTTP4 uses HttpClient 4.x while HTTP uses HttpClient 3.x.</p></td></tr></table></div></div><div class="refsection"><a name="d0e27998"></a><h2>URI format</h2><p>The URI format for an HTTP4 endpoint is:</p><pre class="programlisting">http(s)4:<em class="replaceable"><code>hostname</code></em>[:<em class="replaceable"><code>port</code></em>][/<em class="replaceable"><code>resourceUri</code></em>][?<em class="replaceable"><code>options</code></em>]</pre><p>By default the port is set to <code class="code">80</code> for HTTP and to 
      <code class="code">443</code> for HTTPS.</p></div><div class="refsection"><a name="d0e28025"></a><h2>Dependencies</h2><p>Maven users will need to add a dependency on <code class="code">camel-http4</code> to their 
      <code class="filename">pom.xml</code> for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-http4<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre></div><div class="refsection"><a name="d0e28038"></a><h2>HttpEndpoint options</h2><p><a class="xref" href="http4.html#HTTP4RefOptsTbl" title="Table&nbsp;24.&nbsp;HTTP4 endpoint options">Table&nbsp;24, &#8220;HTTP4 endpoint options&#8221;</a> lists the options for an HTTP4 endpoint.</p><div class="table"><a name="HTTP4RefOptsTbl"></a><p class="title"><b>Table&nbsp;24.&nbsp;HTTP4 endpoint options</b></p><div class="table-contents"><table summary="HTTP4 endpoint options" width="100%" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><thead><tr><th>Name</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">x509HostnameVerifier</code></td><td><code class="code">BrowserCompatHostnameVerifier</code>
              <a href="#ftn.HTTP4OptsFNT010" class="footnote"><sup class="footnote"><a name="HTTP4OptsFNT010"></a>[a]</sup></a>
            </td><td>Specifies an <code class="code">X509HostnameVerifier</code><a href="http4.html#ftn.HTTP4OptsFNT010" class="footnoteref"><sup class="footnoteref">[a]</sup></a> 
            instance in the registry.</td></tr><tr><td><code class="code">throwExceptionOnFailure</code></td><td><code class="code">true</code></td><td>Specifies if you want to disable throwing the 
              <code class="exceptionname">HttpOperationFailedException</code> in case of failed 
              responses from the remote server. This allows you to get all responses regardless 
              of the HTTP status code.</td></tr><tr><td><code class="code">bridgeEndpoint</code></td><td><code class="code">false</code></td><td>Specifies if the HttpProducer ignores the <code class="code">Exchange.HTTP_URI</code> 
              header, and use the endpoint's URI for request. If the option is <code class="code">true</code>, 
              HttpProducer and CamelServlet will skip the gzip processing if the 
              content-encoding is <code class="code">gzip</code>.</td></tr><tr><td><code class="code">disableStreamCache</code></td><td><code class="code">false</code></td><td>Specifies if the DefaultHttpBinding copies the request input stream directly 
              into the message body. The default setting is to copy the request input stream into 
              a stream cache and into the message body to support reading the message twice.</td></tr><tr><td><code class="code">httpBinding</code></td><td><code class="code">null</code></td><td>Specifies a reference to a <code class="code">HttpBinding</code><a href="#ftn.HTTP4OptsFNT020" class="footnote"><sup class="footnote"><a name="HTTP4OptsFNT020"></a>[b]</sup></a> in the 
            registry.</td></tr><tr><td><code class="code">httpClientConfigurer</code></td><td><code class="code">null</code></td><td>Specifies a reference to a <code class="code">HttpClientConfigurer</code>
              <a href="http4.html#ftn.HTTP4OptsFNT020" class="footnoteref"><sup class="footnoteref">[b]</sup></a> in the registry.</td></tr><tr><td><code class="code">httpClient.<em class="replaceable"><code>XXX</code></em></code></td><td>&nbsp;</td><td>Specifies options to set on the 
              <a class="link" href="http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/params/BasicHttpParams.html" target="_top">BasicHttpParams</a>. 
              For instance, <code class="code">httpClient.soTimeout=5000</code> will set the 
              <code class="code">SO_TIMEOUT</code> to 5 seconds.</td></tr><tr><td><code class="code">clientConnectionManager</code></td><td><code class="code">null</code></td><td>Specifies a custom <code class="code">ClientConnectionManager</code>
              <a href="#ftn.HTTP4OptsFN030" class="footnote"><sup class="footnote"><a name="HTTP4OptsFN030"></a>[c]</sup></a>.</td></tr><tr><td><code class="code">transferException</code></td><td><code class="code">false</code></td><td>Specifies if a producer will throw the received exception if the received 
              exception was serialized in the response as a 
              <code class="code">application/x-java-serialized-object</code> content type.</td></tr><tr><td><code class="code">maxTotalConnections</code></td><td><code class="code">200</code></td><td>Specifies the maximum number of connections.</td></tr><tr><td><code class="code">connectionsPerRoute</code></td><td><code class="code">20</code></td><td>Specifies the maximum number of connections per route.</td></tr></tbody><tbody class="footnotes"><tr><td colspan="3"><div id="ftn.HTTP4OptsFNT010" class="footnote"><p><a href="#HTTP4OptsFNT010" class="para"><sup class="para">[a] </sup></a>In the package <span class="package">org.apache.http.conn.ssl</span>.</p></div><div id="ftn.HTTP4OptsFNT020" class="footnote"><p><a href="#HTTP4OptsFNT020" class="para"><sup class="para">[b] </sup></a>In the <span class="package">org.apache.camel.component.http</span> package.</p></div><div id="ftn.HTTP4OptsFN030" class="footnote"><p><a href="#HTTP4OptsFN030" class="para"><sup class="para">[c] </sup></a>In the <span class="package">org.apache.http.conn</span> package.</p></div></td></tr></tbody></table></div></div><br class="table-break"></div><div class="refsection"><a name="d0e28216"></a><h2>Authentication and proxy options</h2><p>The following authentication options can also be set on the HTTP4 endpoint:</p><div class="informaltable"><table width="100%" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><thead><tr><th>Name</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">username</code>
        </td><td><code class="literal">null</code>
        </td><td> Username for authentication. </td></tr><tr><td><code class="literal">password</code>
        </td><td><code class="literal">null</code>
        </td><td> Password for authentication. </td></tr><tr><td><code class="literal">domain</code>
        </td><td><code class="literal">null</code>
        </td><td> The domain name for authentication. </td></tr><tr><td><code class="literal">host</code>
        </td><td><code class="literal">null</code>
        </td><td> The host name authentication. </td></tr><tr><td><code class="literal">proxyHost</code>
        </td><td><code class="literal">null</code>
        </td><td> The proxy host name </td></tr><tr><td><code class="literal">proxyPort</code>
        </td><td><code class="literal">null</code>
        </td><td> The proxy port number </td></tr><tr><td><code class="literal">proxyUsername</code>
        </td><td><code class="literal">null</code>
        </td><td> Username for proxy authentication </td></tr><tr><td><code class="literal">proxyPassword</code>
        </td><td><code class="literal">null</code>
        </td><td> Password for proxy authentication </td></tr><tr><td><code class="literal">proxyDomain</code>
        </td><td><code class="literal">null</code>
        </td><td> The proxy domain name </td></tr><tr><td><code class="literal">proxyNtHost</code>
        </td><td><code class="literal">null</code>
        </td><td> The proxy Nt host name </td></tr></tbody></table></div></div><div class="refsection"><a name="d0e28342"></a><h2>HttpComponent options</h2><p>The following options can be set on the HttpComponent:</p><div class="informaltable"><table width="100%" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><thead><tr><th>Name</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">httpBinding</code>
        </td><td><code class="literal">null</code>
        </td><td> To use a custom <code class="literal">org.apache.camel.component.http.HttpBinding</code>. </td></tr><tr><td><code class="literal">httpClientConfigurer</code>
        </td><td><code class="literal">null</code>
        </td><td> To use a custom <code class="literal">org.apache.camel.component.http.HttpClientConfigurer</code>. </td></tr><tr><td><code class="literal">httpConnectionManager</code>
        </td><td><code class="literal">null</code>
        </td><td> To use a custom <code class="literal">org.apache.commons.httpclient.HttpConnectionManager</code>. </td></tr><tr><td><code class="literal">x509HostnameVerifier</code>
        </td><td><code class="literal">null</code>
        </td><td>To use a custom <code class="literal">org.apache.http.conn.ssl.X509HostnameVerifier</code>
        </td></tr></tbody></table></div></div><div class="refsection"><a name="d0e28414"></a><h2>Message headers</h2><p>The following <code class="code">Exchange</code> properties are recognized by HTTP4 endpoints:</p><div class="table"><a name="d0e28422"></a><p class="title"><b>Table&nbsp;25.&nbsp;HTTP Exchange properties</b></p><div class="table-contents"><table summary="HTTP Exchange properties" width="100%" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">CamelHttpUri</code></td><td><code class="code">String</code></td><td>Specifies the URI to call. The value if this header will override the URI set 
            directly on the endpoint.</td></tr><tr><td><code class="code">CamelHttpPath</code></td><td><code class="code">String</code></td><td>Specifies the Request URI's path. The header will be used to build the request 
              URI with the HTTP_URI. If the path is start with <code class="code">/</code>, the HTTP producer 
              will try to find the relative path based on the <code class="code">HTTP_BASE_URI</code> header or 
              the <code class="code">exchange.getFromEndpoint().getEndpointUri()</code> method.</td></tr><tr><td><code class="code">CamelHttpQuery</code></td><td><code class="code">String</code></td><td>Specifies the URI parameters. The value of this header overrides the URI 
            parameters set directly on the endpoint.</td></tr><tr><td><code class="code">CamelHttpResponseCode</code></td><td><code class="code">int</code></td><td>Specifies the HTTP response code from the external server.</td></tr><tr><td><code class="code">CamelHttpCharacterEncoding</code></td><td><code class="code">String</code></td><td>Specifies the character encoding.</td></tr><tr><td><code class="code">Content-Type</code></td><td><code class="code">String</code></td><td>Specifies the HTTP content type. This header is populated on both the IN and 
              OUT message to provide a content type, such as <code class="code">text/html</code>.</td></tr><tr><td><code class="code">Content-Encoding</code></td><td><code class="code">String</code></td><td>Specifies the HTTP content encoding. This header is populated on both the IN 
              and OUT message to provide a content encoding, such as <code class="code">gzip</code>.</td></tr><tr><td><code class="code">CamelHttpServletRequest</code></td><td><code class="code">String</code></td><td>Specifies the <code class="code">HttpServletRequest</code> object.</td></tr><tr><td><code class="code">CamelHttpServletResponse</code></td><td><code class="code">String</code></td><td>Specifies the <code class="code">HttpServletResponse</code> object.</td></tr><tr><td><code class="code">CamelHttpProtocolVersion</code></td><td><code class="code">String</code></td><td>Specifies the HTTP protocol version. If you do not specify the header, 
              HttpProducer will use the default value <code class="code">HTTP/1.1</code>.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="refsection"><a name="d0e28549"></a><h2>Message Body</h2><p>Apache Camel will store the HTTP response from the external server on the OUT body. All
            headers from the IN message will be copied to the OUT message, so headers are preserved
            during routing. Additionally, Apache Camel will add the HTTP response headers as well to
            the OUT message headers.</p></div><div class="refsection"><a name="d0e28554"></a><h2>Response code</h2><p>Apache Camel will handle according to the HTTP response code:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Response code is in the range 100..299, Apache Camel regards it as a success
                    response.</p></li><li class="listitem"><p>Response code is in the range 300..399, Apache Camel regards it as a redirection
                    response and will throw a
                        <code class="exceptionname">HttpOperationFailedException</code> with the
                    information.</p></li><li class="listitem"><p>Response code is 400+, Apache Camel regards it as an external server failure and will
                    throw a <code class="exceptionname">HttpOperationFailedException</code> with the
                    information.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.gif"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The option, <code class="code">throwExceptionOnFailure</code>, can be set to 
            <code class="code">false</code> to prevent the 
              <code class="exceptionname">HttpOperationFailedException</code> from being thrown for 
            failed response codes. This allows you to get any response from the remote 
            server.</p></td></tr></table></div></li></ul></div></div><div class="refsection"><a name="d0e28587"></a><h2>Related topics</h2><table border="0" summary="Simple list" class="simplelist"><tr><td><span class="olink">????</span></td></tr><tr><td><span class="olink">????</span></td></tr><tr><td><a class="link" href="http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/params/BasicHttpParams.html" target="_top">BasicHttpParams</a></td></tr></table></div></div></body></html>
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>AWS-SDB</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-AWS.html" title="AWS"><link rel="prev" href="IDU-AWS-S3.html" title="AWS-S3"><link rel="next" href="IDU-AWS-SES.html" title="AWS-SES"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-AWS-SDB"></a>AWS-SDB</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_SDBComponent"></a>SDB Component</h3></div></div></div><p></p><p><span class="bold"><strong>Available as of Camel 2.8.4</strong></span>
    </p><p>The sdb component supports storing and retrieving data from/to <a class="link" href="http://aws.amazon.com/sdb" target="_top">Amazon's SDB</a> service.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Prerequisites"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Prerequisites</th></tr><tr><td align="left" valign="top"><p>You must have a valid Amazon Web Services developer account, and be signed up to use Amazon SDB. More information are available at <a class="link" href="http://aws.amazon.com/sdb" target="_top">Amazon SDB</a>.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_URIFormat"></a>URI Format</h3></div></div></div><p></p><pre class="programlisting">
aws-sdb://domainName[?options]
</pre><p>You can append query options to the URI in the following format, ?options=value&amp;option2=value&amp;...</p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_URIOptions"></a>URI Options</h3></div></div></div><p></p><table id="d0e25445"><tr>
        <th> Name </th>
        <th> Default Value </th>
        <th> Context </th>
        <th> Description </th>
      </tr><tr>
        <td>amazonSDBClient </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> Reference to a <code class="literal">com.amazonaws.services.simpledb.AmazonSimpleDB</code> in the <a class="link" href="Registry" target="_top">Registry</a>. </td>
      </tr><tr>
        <td>accessKey </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> Amazon AWS Access Key </td>
      </tr><tr>
        <td>secretKey </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> Amazon AWS Secret Key </td>
      </tr><tr>
        <td>amazonSdbEndpoint </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> The region with which the AWS-SDB client wants to work with. </td>
      </tr><tr>
        <td>domainName </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> The name of the domain currently worked with. </td>
      </tr><tr>
        <td>maxNumberOfDomains </td>
        <td><code class="literal">100</code>
        </td>
        <td> Producer </td>
        <td> The maximum number of domain names you want returned. The range is 1 * to 100. </td>
      </tr><tr>
        <td>consistentRead </td>
        <td><code class="literal">false</code>
        </td>
        <td> Producer </td>
        <td> Determines whether or not strong consistency should be enforced when data is read.</td>
      </tr><tr>
        <td>operation</td>
        <td><code class="literal">PutAttributes</code>
        </td>
        <td> Producer </td>
        <td> Valid values are BatchDeleteAttributes, BatchPutAttributes, DeleteAttributes, DeleteDomain, DomainMetadata, GetAttributes, ListDomains, PutAttributes, Select.</td>
      </tr></table><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Required SDB component options"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Required SDB component options</th></tr><tr><td align="left" valign="top"><p>You have to provide the amazonSDBClient in the <a class="link" href="Registry" target="_top">Registry</a> or your accessKey and secretKey to access the <a class="link" href="http://aws.amazon.com/sdb" target="_top">Amazon's SDB</a>.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_Usage"></a>Usage</h3></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_MessageheadersevaluatedbytheSDBproducer"></a>Message headers evaluated by the SDB producer</h3></div></div></div><p></p><p>

    </p><table id="d0e25619"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbAttributes</code>
        </td>
        <td><code class="literal">Collection&lt;Attribute&gt;</code>
        </td>
        <td> List of attributes to be acted upon. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbAttributeNames</code>
        </td>
        <td><code class="literal">Collection&lt;String&gt;</code>
        </td>
        <td> The names of the attributes to be retrieved. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbConsistentRead</code>
        </td>
        <td><code class="literal">Boolean</code>
        </td>
        <td> Determines whether or not strong consistency should be enforced when data is read. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbDeletableItems</code>
        </td>
        <td><code class="literal">Collection&lt;DeletableItem&gt;</code>
        </td>
        <td> A list of items on which to perform the delete operation in a batch. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbDomainName</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> The name of the domain currently worked with. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbItemName</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> The unique key for this item </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbMaxNumberOfDomains</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> The maximum number of domain names you want returned. The range is 1 * to 100. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbNextToken</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> A string specifying where to start the next list of domain/item names. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbOperation</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> To override the operation from the URI options. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbReplaceableAttributes</code>
        </td>
        <td><code class="literal">Collection&lt;ReplaceableAttribute&gt;</code>
        </td>
        <td> List of attributes to put in an Item. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbReplaceableItems</code>
        </td>
        <td><code class="literal">Collection&lt;ReplaceableItem&gt;</code>
        </td>
        <td> A list of items to put in a Domain. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbSelectExpression</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> The expression used to query the domain. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbUpdateCondition</code>
        </td>
        <td><code class="literal">UpdateCondition</code>
        </td>
        <td> The update condition which, if specified, determines whether the specified attributes will be updated/deleted or not. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_MessageheaderssetduringDomainMetadataoperation"></a>Message headers set during DomainMetadata operation</h3></div></div></div><p></p><p>

    </p><table id="d0e25835"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbTimestamp</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> The data and time when metadata was calculated, in Epoch (UNIX) seconds. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbItemCount</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> The number of all items in the domain. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbAttributeNameCount</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> The number of unique attribute names in the domain. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbAttributeValueCount</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> The number of all attribute name/value pairs in the domain. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbAttributeNameSize</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> The total size of all unique attribute names in the domain, in bytes. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbAttributeValueSize</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> The total size of all attribute values in the domain, in bytes. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbItemNameSize</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> The total size of all item names in the domain, in bytes. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_MessageheaderssetduringGetAttributesoperation"></a>Message headers set during GetAttributes operation</h3></div></div></div><p></p><p>

    </p><table id="d0e25961"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbAttributes</code>
        </td>
        <td><code class="literal">List&lt;Attribute&gt;</code>
        </td>
        <td> The list of attributes returned by the operation. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_MessageheaderssetduringListDomainsoperation"></a>Message headers set during ListDomains operation</h3></div></div></div><p></p><p>

    </p><table id="d0e25997"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbDomainNames</code>
        </td>
        <td><code class="literal">List&lt;String&gt;</code>
        </td>
        <td> A list of domain names that match the expression. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbNextToken</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> An opaque token indicating that there are more domains than the specified MaxNumberOfDomains still available. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_MessageheaderssetduringSelectoperation"></a>Message headers set during Select operation</h3></div></div></div><p></p><p>

    </p><table id="d0e26048"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbItems</code>
        </td>
        <td><code class="literal">List&lt;Item&gt;</code>
        </td>
        <td> A list of items that match the select expression. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsSdbNextToken</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> An opaque token indicating that more items than MaxNumberOfItems were matched, the response size exceeded 1 megabyte, or the execution time exceeded 5 seconds. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_AdvancedAmazonSimpleDBconfiguration"></a>Advanced AmazonSimpleDB configuration</h3></div></div></div><p>If you need more control over the <code class="literal">AmazonSimpleDB</code> instance configuration you can create your own instance and refer to it from the URI:</p><pre class="programlisting">
from("direct:start")
.to("aws-sdb://domainName?amazonSDBClient=#client");
</pre><p>The <code class="literal">#client</code> refers to a <code class="literal">AmazonSimpleDB</code> in the <a class="link" href="Registry" target="_top">Registry</a>.</p><p>For example if your Camel Application is running behind a firewall:</p><pre class="programlisting">
AWSCredentials awsCredentials = new BasicAWSCredentials("myAccessKey", "mySecretKey");
ClientConfiguration clientConfiguration = new ClientConfiguration();
clientConfiguration.setProxyHost("http://myProxyHost");
clientConfiguration.setProxyPort(8080);

AmazonSimpleDB client = new AmazonSimpleDBClient(awsCredentials, clientConfiguration);

registry.bind("client", client);
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-SDB_HSH_Dependencies"></a>Dependencies</h3></div></div></div><p></p><p>Maven users will need to add the following dependency to their pom.xml.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: pom.xml"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">pom.xml</th></tr><tr><td align="left" valign="top"><pre class="programlisting">
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-aws&lt;/artifactId&gt;
    &lt;version&gt;${camel-version}&lt;/version&gt;
&lt;/dependency&gt;
</pre></td></tr></table></div><p>where <code class="literal">${camel-version}</code> must be replaced by the actual version of Camel (2.8.4 or higher).</p><p>

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p></p><p>
          <a href="PLUGINS_ROOT/org.fusesource.ide.help/IDU-AWS.html" class="olink">AWS Component</a>
        </p></li></ul></div></div></div></body></html>
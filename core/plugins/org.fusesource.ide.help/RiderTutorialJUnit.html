<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>To Test a Route with JUnit</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="description" content="This tutorial walks you through the process of using the New Camel Test Case wizard to create a test case for your route and using it test the route."><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="RiderTutorials.html" title="Tutorials"><link rel="prev" href="RiderTutorialTrace.html" title="To Trace a Message Through a Route"><link rel="next" href="RiderTutDeployFESB.html" title="To Publish a Fuse Project to Red Hat JBoss Fuse"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="RiderTutorialJUnit"></a>To Test a Route with JUnit</h1></div><div><div class="abstract"><p>This tutorial walks you through the process of using the New Camel Test Case wizard
                to create a test case for your route and using it test the route.</p></div></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e12393"></a>Overview</h2></div></div></div><p>The <span class="guilabel">New Camel JUnit Test Case wizard</span> generates a boilerplate JUnit test case. This
            means that when you create or modify a route (for example, adding more processors to
            it), you'll need to modify the generated test case to add expectations and assertions
            specific to the new route you've created, so the test is valid for the new route.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e12401"></a>Goals</h2></div></div></div><p>In this tutorial you will:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>delete the existing JUnit test case</p></li><li class="listitem"><p>generate a new JUnit test case for the CBRroute
                    project</p></li><li class="listitem"><p>modify the newly generated
                     JUnit test case</p></li><li class="listitem"><p>modify the CBRroute project's <code class="filename">pom.xml</code> file</p></li><li class="listitem"><p>run the CBRroute with the New JUnit test case</p></li><li class="listitem"><p>observe the output</p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e12428"></a>Prerequisites</h2></div></div></div><p>To complete this tutorial you will need the <span class="bold"><strong>CBRroute</strong></span>
            project you used in <a class="xref" href="RiderTutorialTrace.html" title="To Trace a Message Through a Route"><i>To Trace a Message Through a Route</i></a></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you skipped any tutorial after <a class="xref" href="RiderTutorialCreate.html" title="To Create a New Route"><i>To Create a New Route</i></a>,
                you can use the prefabricated
                    <code class="filename">camelContext6.xml</code> file to work through
                this tutorial (for details, see <a class="xref" href="">???</a>).</p></td></tr></table></div><p>Delete any trace-generated messages from the
                <span class="guilabel">CBRroute</span> project's
                <code class="filename">/src/data/</code> directory and
                <code class="filename">/target/messages/</code> subdirectories in
                <span class="guilabel">Project Explorer</span>. Trace-generated messages
            begin with the <code class="literal">ID-</code> prefix. For example, <a class="xref" href="RiderTutorialJUnit.html#tutTraceMsgExample" title="Figure&nbsp;31.&nbsp;Trace-generated messages">Figure&nbsp;31, &#8220;Trace-generated messages&#8221;</a> shows six trace-generated
            messages:</p><div class="figure"><a name="tutTraceMsgExample"></a><p class="title"><b>Figure&nbsp;31.&nbsp;Trace-generated messages</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="./images/tutTraceGenMsgs.png" align="middle" width="147.7" alt="Trace-generated messages"></div></div></div><br class="figure-break"><p>Select all trace-generated messages in batch, right-click to open the
            context menu, and select <span class="guimenuitem">Delete</span>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e12477"></a>Deleting the existing test case</h2></div></div></div><p>To delete the existing Apache Camel test case:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In <span class="guilabel">Project Explorer</span>, expand
                        <code class="filename">src/test/java</code> to expose the
                        <code class="filename">CamelContextXmlTest</code> file, as shown
                    in <a class="xref" href="RiderTutorialJUnit.html#tutJnuitTestFile" title="Figure&nbsp;32.&nbsp;CamelContextXmlTest.java file location">Figure&nbsp;32</a>.</p><div class="figure"><a name="tutJnuitTestFile"></a><p class="title"><b>Figure&nbsp;32.&nbsp;CamelContextXmlTest.java file location</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="./images/tutCamContextTestFile.png" align="middle" width="144.10000000000002" alt="CamelContextXmlTest.java file location"></div></div></div><br class="figure-break"></li><li class="step"><p>Right-click it to open the context menu, and select
                <span class="guimenuitem">Delete</span>.</p><p>A dialog box opens asking you to confirm deletion of the test case file.</p></li><li class="step"><p>Click <span class="guibutton">OK</span>.</p></li><li class="step"><p>Verify that the existing test case has been deleted by
                    right-clicking <span class="guilabel">CBRroute</span> and selecting
                        <span class="guimenuitem">Refresh</span>.</p><p>The <code class="filename">src/test/java/tutorial.cbr.route</code> directory should be empty.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e12531"></a>Creating the new test case</h2></div></div></div><p>To create a new Apache Camel test case:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In <span class="guilabel">Project Explorer</span>, select
                        <code class="filename">src/test/java</code>.</p></li><li class="step"><p>Right-click it to open the context menu, and then select <span class="guimenu">New</span> &gt; <span class="guimenuitem">Camel Test Case</span> to open the <span class="guilabel">New Camel JUnit Test Case</span> wizard,
                    as shown in <a class="xref" href="RiderTutorialJUnit.html#RiderTutorialJUnitFig010" title="Figure&nbsp;33.&nbsp;New Camel JUnit Test Case wizard">Figure&nbsp;33</a>.</p><div class="figure"><a name="RiderTutorialJUnitFig010"></a><p class="title"><b>Figure&nbsp;33.&nbsp;New Camel JUnit Test Case wizard</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/NewCamTstCaseTut.png" align="middle" width="355.55" alt="new JUnit test case wizard page one"></div></div></div><br class="figure-break"></li><li class="step"><p>Make sure the <span class="guilabel">Source folder</span> field contains
                        <strong class="userinput"><code>CBRroute/src/test/java</code></strong>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If needed, you can click <span class="inlinemediaobject"><img src="images/BrowseButton.jpg" alt="browse button"></span> to find the proper folder.</p></td></tr></table></div></li><li class="step"><p>The <span class="guilabel">Package</span> field defaults to
                        <code class="filename">tutorial.cbr.route</code>. To include the test case in a
                    different package, enter the name of the package.</p></li><li class="step"><p>In the <span class="guilabel">Camel XML file under test</span> field, enter
                        <strong class="userinput"><code>src/main/resources/OSGI-INF/blueprint/camelContext.xml</code></strong>,
                    or use <span class="inlinemediaobject"><img src="images/BrowseButton.jpg" alt="browse button"></span> to open a file explorer, configured to screen for XML
                    files, to locate the file.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The <span class="guilabel">Name</span> field defaults to
                            <em class="replaceable"><code>CamelContextXmlTest</code></em> for the name of the test
                        file.</p></td></tr></table></div></li><li class="step"><p>Click <span class="guibutton">Next&gt;</span> to open the <span class="guilabel">Test
                        Endpoints</span> page, shown in <a class="xref" href="RiderTutorialJUnit.html#RiderTutorialJUnitFig020" title="Figure&nbsp;34.&nbsp;Test Endpoints page">Figure&nbsp;34</a>.</p><div class="figure"><a name="RiderTutorialJUnitFig020"></a><p class="title"><b>Figure&nbsp;34.&nbsp;Test Endpoints page</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/NewCamtstEndptTut.png" align="middle" width="297.05" alt="new JUnit test case wizard page two"></div></div></div><br class="figure-break"></li><li class="step"><p>By default, all endpoints are selected and will be
                    included in the test case. Leave them selected for this
                    tutorial.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>
                    You can select or deselect all endpoints by clicking the <span class="guilabel">Select
                        All</span> or <span class="guilabel">Deselect All</span> button, or you can
                    select and deselect individual endpoints by clicking the check box next to
                    each.</p></td></tr></table></div></li><li class="step"><p>Click <span class="guibutton">Finish</span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If prompted, add JUnit to the build path.</p></td></tr></table></div></li></ol></div><p>The artifacts for the test are added to your project and appear in
                <span class="guilabel">Project Explorer</span> under
            <code class="filename">src/test/java</code>. The
            class implementing the test case opens in the tooling's Java
            editor:</p><div class="informalexample"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">package</strong> tutorial.cbr.route;

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.EndpointInject;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.Produce;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.ProducerTemplate;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.builder.RouteBuilder;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.component.mock.MockEndpoint;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.test.blueprint.CamelBlueprintTestSupport;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.junit.Test;

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> CamelContextXmlTest <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> CamelBlueprintTestSupport {

	<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// TODO Create test message bodies that work for the route(s) being tested</em>
	<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Expected message bodies</em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> Object[] expectedBodies = {
			<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&lt;something id='1'&gt;expectedBody1&lt;/something&gt;"</em></strong>,
			<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&lt;something id='2'&gt;expectedBody2&lt;/something&gt;"</em></strong>;
	<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Templates to send to input endpoints</em>
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produce(uri = "file:src/data?noop=true")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> ProducerTemplate inputEndpoint;
	<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Mock endpoints used to consume messages from the output endpoints and then perform assertions</em>
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "mock:output")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> MockEndpoint outputEndpoint;
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "mock:output2")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> MockEndpoint output2Endpoint;
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "mock:output3")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> MockEndpoint output3Endpoint;
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "mock:output4")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> MockEndpoint output4Endpoint;
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "mock:output5")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> MockEndpoint output5Endpoint;

	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Test</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> testCamelRoute() <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">throws</strong> Exception {
		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Create routes from the output endpoints to our mock endpoints so we can assert expectations</em>
		context.addRoutes(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> RouteBuilder() {
			<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
			<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">throws</strong> Exception {
				from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/messages/Germany"</em></strong>).to(output4Endpoint);
				from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/messages/GreatBritain"</em></strong>).to(output3Endpoint);
				from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/messages/USA"</em></strong>).to(output2Endpoint);
				from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/messages/France"</em></strong>).to(output5Endpoint);
				from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/messages/invalidOrders"</em></strong>).to(outputEndpoint);
			}
		});

		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Define some expectations</em>

		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// TODO Ensure expectations make sense for the route(s) we're testing</em>
		output4Endpoint.expectedBodiesReceivedInAnyOrder(expectedBodies);
		

		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Send some messages to input endpoints</em>
		<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">for</strong> (Object expectedBody : expectedBodies) {
			inputEndpoint.sendBody(expectedBody);
		}

		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Validate our expectations</em>
		assertMockEndpointsSatisfied();
	}

	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> String getBlueprintDescriptor() {
		<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"OSGI-INF/blueprint/camelContext.xml"</em></strong>;
	}

}</pre></div><p>This generated JUnit test case is insufficient for the CBRroute
            project, and it will fail to run successfully. You need to modify it
            and the project's <code class="filename">pom.xml</code>, as described in
                <a class="xref" href="RiderTutorialJUnit.html#modifyCamContext" title="Modifying the CamelContextXmlTest file">Modifying the CamelContextXmlTest file </a> and <a class="xref" href="RiderTutorialJUnit.html#modifyPomXml" title="Modifying the pom.xml file">Modifying the pom.xml file</a>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="modifyCamContext"></a>Modifying the CamelContextXmlTest file </h2></div></div></div><p>You need to modify the
            <code class="filename">CamelContextXmlTest.java</code> file
            to:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>import several classes that support required file functions</p></li><li class="listitem"><p>create variables for holding the content of the various source
                            <code class="filename">.xml</code> files</p></li><li class="listitem"><p>read the content of the source
                    <code class="filename">.xml</code> files</p></li><li class="listitem"><p>define appropriate expectations</p></li></ul></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In <span class="guilabel">Project Explorer</span>, expand the CBRroute project to
                    expose the <code class="filename">CamelContextXmlTest</code>
                    item.</p><div class="informalfigure"><div class="mediaobject" align="center"><img src="./images/tutOpnCamCntxtTstRteEd.png" align="middle" width="179.4"></div></div></li><li class="step"><p>Double-click <code class="filename">CamelContextXmlTest</code> to
                    open the file in the route editor.</p></li><li class="step"><p>In the route editor, click the expand button next to
                <code class="code">import org.apache.camel.EndpointInject;</code> to expand the list.</p></li><li class="step"><p>Add the three lines shown here:</p><div class="informalfigure"><div class="mediaobject" align="center"><img src="./images/tutCamCntxtFile.png" align="middle" width="230.4"></div></div></li><li class="step"><p>Scroll down to the lines that follow directly after <code class="code">// Expected
                        message bodies</code>. </p></li><li class="step"><p>Replace those lines&#8212;<code class="code">protected Object[] expectedBodies={ ......
                        expectedBody2&lt;/something&gt;"};</code>&#8212; with the
                    <code class="code">protected String body#;</code> lines shown here:</p><div class="informalfigure"><div class="mediaobject" align="center"><img src="./images/tutCamCntxtFile2.png" align="middle" width="465.3999999999999"></div></div></li><li class="step"><p>Scroll down to the line <code class="code">public void testcamelRoute() throws
                        Exception {</code>, and insert directly after it the
                    lines <code class="code">body# = FileUtils.readFileToString(new
                        File("src/data/message#.xml"));</code> shown
                    here:</p><div class="informalfigure"><div class="mediaobject" align="center"><img src="./images/tutCamCntxtFile3.png" align="middle" width="360.75"></div></div></li><li class="step"><p>Scroll down to the lines that follow directly after
                <code class="code">// TODO Ensure
                    expectations make sense for the route(s) we're
                    testing</code>.</p></li><li class="step"><p>Replace the block of code that begins with
                    <code class="code">output4Endpoint.expectedBodiesReceivedInAnyOrder(expectedBodies);</code>
                    and ends with 
                    ...<code class="code">inputEndpoint.sendBody(expectedBody); }</code> with
                    the lines shown here:</p><div class="informalfigure"><div class="mediaobject" align="center"><img src="./images/tutCamCntxtFile4.png" align="middle" width="346.45"></div></div><p>Leave the remaining code as is.</p></li><li class="step"><p>Save the file.</p></li><li class="step"><p>Check that your updated <code class="filename">CamelContextXmlTest.java</code> file
                    has the required modifications. It should look something
                    like this:</p><div class="informalexample"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">package</strong> tutorial.cbr.route;


<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.EndpointInject;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.Produce;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.ProducerTemplate;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.builder.RouteBuilder;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.component.mock.MockEndpoint;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.camel.test.blueprint.CamelBlueprintTestSupport;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.apache.commons.io.FileUtils;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> org.junit.Test;

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> java.io.File;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">import</strong> java.util.Scanner;

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> CamelContextXmlTest <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> CamelBlueprintTestSupport {

	<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// TODO Create test message bodies that work for the route(s) being tested</em>
	<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Expected message bodies</em>
	
	<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// To assert that everything works as it should, read the content of created xml files.</em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong>  String body1;
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong>  String body2;
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong>  String body3;
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong>  String body4;
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong>  String body5;
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong>  String body6;


	<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Templates to send to input endpoints</em>
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produce(uri = "file:src/data?noop=true")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> ProducerTemplate inputEndpoint;
	<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Mock endpoints used to consume messages from the output </em>
	<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// endpoints and then perform assertions</em>
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "mock:output")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> MockEndpoint outputEndpoint;
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "mock:output2")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> MockEndpoint output2Endpoint;
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "mock:output3")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> MockEndpoint output3Endpoint;
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "mock:output4")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> MockEndpoint output4Endpoint;
	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "mock:output5")</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> MockEndpoint output5Endpoint;

	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Test</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> testCamelRoute() <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">throws</strong> Exception {
		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Easy way of reading content of xml files to a String object. </em>
		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// But you must add dependency on commons-io project to pom.xml</em>
		body1 = FileUtils.readFileToString(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> File(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"src/data/message1.xml"</em></strong>));
		body3 = FileUtils.readFileToString(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> File(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"src/data/message3.xml"</em></strong>));
		body5 = FileUtils.readFileToString(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> File(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"src/data/message5.xml"</em></strong>));
		body6 = FileUtils.readFileToString(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> File(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"src/data/message6.xml"</em></strong>));

		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Invalid orders.</em>
		body2 = FileUtils.readFileToString(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> File(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"src/data/message2.xml"</em></strong>));
		body4 = FileUtils.readFileToString(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> File(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"src/data/message4.xml"</em></strong>));


		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Create routes from the output endpoints to our mock endpoints </em>
		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// so we can assert expectations</em>
		context.addRoutes(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> RouteBuilder() {
			<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
			<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">throws</strong> Exception {
				from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/messages/Germany"</em></strong>).to(output4Endpoint);
				from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/messages/GreatBritain"</em></strong>).to(output3Endpoint);
				from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/messages/USA"</em></strong>).to(output2Endpoint);
				from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/messages/France"</em></strong>).to(output5Endpoint);
				from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/messages/invalidOrders"</em></strong>).to(outputEndpoint);
			}
		});

		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Define some expectations</em>

		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// TODO Ensure expectations make sense for the route(s) we're testing</em>

		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Invalid orders</em>
		outputEndpoint.expectedBodiesReceived(body2, body4);

		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// For each country one order</em>
		output2Endpoint.expectedBodiesReceived(body1);
		output3Endpoint.expectedBodiesReceived(body3);
		output4Endpoint.expectedBodiesReceived(body6);
		output5Endpoint.expectedBodiesReceived(body5);

		<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Validate our expectations</em>
		assertMockEndpointsSatisfied();
	}

	<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
	<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">protected</strong> String getBlueprintDescriptor() {
		<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"OSGI-INF/blueprint/camelContext.xml"</em></strong>;
	}

} </pre></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="modifyPomXml"></a>Modifying the pom.xml file</h2></div></div></div><p>You need to add a dependency on the commons-io project to the
            CBRroute project's <code class="filename">pom.xml</code> file.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In <span class="guilabel">Project Explorer</span>, double-click
                        <code class="filename">pom.xml</code>, located below the
                        <code class="filename">target</code> folder, to open the file in
                    the route editor.</p></li><li class="step"><p>Click the <span class="guilabel">pom.xml</span> tab at the bottom of the page to
                    open the file for editing.</p></li><li class="step"><p>Add these lines to the end of the
                <code class="code">&lt;dependencies&gt;</code> section:</p><div class="informalexample"><pre class="programlisting">&lt;dependency&gt;
       &lt;groupId&gt;commons-io&lt;/groupId&gt;
       &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
       &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.4</span>&lt;/version&gt;
       &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div></li><li class="step"><p>Save the file.</p><p>The contents of the entire <code class="filename">pom.xml</code>
                    file should look like this:</p><div class="informalexample"><pre class="programlisting">&lt;?xml version=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"1.0"</em></strong> encoding=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"UTF-8"</em></strong>?&gt;
&lt;project xsi:schemaLocation=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"http://maven.apache.org/POM/4.0.0 
</em></strong>    http:<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"</em>
    xmlns:xsi=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"http://www.w3.org/2001/XMLSchema-instance"</em></strong>&gt;
  &lt;modelVersion&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">4.0</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">0</span>&lt;/modelVersion&gt;
  &lt;groupId&gt;tutorial&lt;/groupId&gt;
  &lt;artifactId&gt;cbr-route&lt;/artifactId&gt;
  &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1.0</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">0</span>-SNAPSHOT&lt;/version&gt;
  &lt;packaging&gt;bundle&lt;/packaging&gt;
  &lt;name&gt;A Camel Blueprint Route&lt;/name&gt;
  &lt;url&gt;http:<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//www.myorganization.org&lt;/url&gt;</em>
  &lt;properties&gt;
    &lt;project.reporting.outputEncoding&gt;UTF-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">8</span>&lt;/project.reporting.outputEncoding&gt;
    &lt;project.build.sourceEncoding&gt;UTF-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">8</span>&lt;/project.build.sourceEncoding&gt;
  &lt;/properties&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-core&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.15</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">0</span>&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-blueprint&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.15</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">0</span>&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1.7</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">7</span>&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1.7</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">7</span>&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1.7</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">7</span>&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;log4j&lt;/groupId&gt;
      &lt;artifactId&gt;log4j&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1.2</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">17</span>&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-test-blueprint&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.15</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">0</span>&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;&lt;/groupId&gt;
      &lt;artifactId&gt;camel-infinispan&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.15</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">0</span>&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-jgroups&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.15</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">0</span>&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
      &lt;artifactId&gt;camel-test&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.15</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">0</span>&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;commons-io&lt;/groupId&gt;
      &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
      &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.4</span>&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
  &lt;build&gt;
    &lt;defaultGoal&gt;install&lt;/defaultGoal&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
        &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.5</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1</span>&lt;/version&gt;
        &lt;configuration&gt;
          &lt;source&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1.6</span>&lt;/source&gt;
          &lt;target&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1.6</span>&lt;/target&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;
        &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.6</span>&lt;/version&gt;
        &lt;configuration&gt;
          &lt;encoding&gt;UTF-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">8</span>&lt;/encoding&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
        &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;
        &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.3</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">7</span>&lt;/version&gt;
        &lt;extensions&gt;true&lt;/extensions&gt;
        &lt;configuration&gt;
          &lt;instructions&gt;
            &lt;Bundle-SymbolicName&gt;cbr-route&lt;/Bundle-SymbolicName&gt;
            &lt;Private-Package&gt;tutorial.cbr.route.*&lt;/Private-Package&gt;
            &lt;Import-Package&gt;*&lt;/Import-Package&gt;
          &lt;/instructions&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
        &lt;artifactId&gt;camel-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.15</span>.<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">0</span>&lt;/version&gt;
        &lt;configuration&gt;
          &lt;useBlueprint&gt;true&lt;/useBlueprint&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
&lt;/project&gt;</pre></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e12858"></a>Running the JUnit test</h2></div></div></div><p>To run the test:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Switch to <span class="guilabel">JBoss</span> perspective to free up more
                    workspace.</p></li><li class="step"><p>Select the project root, <code class="filename">CBRroute</code>, in the
                        <span class="guilabel">Project Explorer</span>.</p></li><li class="step"><p>Open the context menu.</p></li><li class="step"><p>Select <span class="guimenu">Run As</span> &gt; <span class="guimenuitem">JUnit Test</span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>By default, <span class="guilabel">JUnit</span> view opens in the sidebar. (To
                        provide a better view, drag it to the bottom, right
                        panel that displays the <span class="guilabel">Console</span>,
                            <span class="guilabel">Servers</span>, and
                            <span class="guilabel">Properties</span> tabs.)</p></td></tr></table></div></li><li class="step"><p>If the test runs successfully, you'll see something like this:</p><div class="figure"><a name="JunitTestSuccess"></a><p class="title"><b>Figure&nbsp;35.&nbsp;Successful JUnit run</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="./images/tutJunitResult2.png" align="middle" width="449.8" alt="JUnit success"></div></div></div><br class="figure-break"><p>If the test fails, you'll see something like this:</p><div class="figure"><a name="RiderTutorialJUnitFig030"></a><p class="title"><b>Figure&nbsp;36.&nbsp;Failed JUnit run</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="./images/tutJunitResult.png" align="middle" width="588.25" alt="JUnit failure"></div></div></div><br class="figure-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>JUnit will fail if your execution environment is not set to Java SE 7 or
                        above. The message bar at the top of the JUnit tab will
                        display an error message indicating that it cannot find
                        the correct SDK. </p><p>To resolve the issue, open the project's context menu,
                        and select <span class="guimenu">Run
                            As</span> &gt; <span class="guisubmenu">Run
                                Configurations</span> &gt; <span class="guimenuitem">JRE
                            tab</span> . Click the
                        <span class="guibutton">Environments</span> button next to the
                        <span class="guilabel">Execution environment:</span>
                        field to locate and select a Java SE 7 environment.</p></td></tr></table></div></li><li class="step"><p>Examine the output and take action to resolve any test failures.</p><p>To see more of the errors displayed in the JUnit panel,
                    click <span class="inlinemediaobject"><img src="images/maximize.gif" width="19.2" alt="Maximize button"></span> on the panel's menu bar to maximize the
                    view. You can also check the surefire reports in the
                        <code class="filename">surefire-reports</code> tab in
                        <span class="guilabel">Project Explorer</span>, as shown in <a class="xref" href="RiderTutorialJUnit.html#tutJUnitSurefireReports" title="Figure&nbsp;37.&nbsp;JUnit surefire reports">Figure&nbsp;37</a>.</p><div class="figure"><a name="tutJUnitSurefireReports"></a><p class="title"><b>Figure&nbsp;37.&nbsp;JUnit surefire reports</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="./images/tutJunitSurefireReports.png" align="middle" width="236.6" alt="JUnit surefire reports"></div></div></div><br class="figure-break"><p>Before you run the JUnit test case again, delete any
                    JUnit-generated test messages from the CBRroute project's
                        <code class="filename">/src/data</code> folder in
                        <span class="guilabel">Project Explorer</span> (see <a class="xref" href="RiderTutorialJUnit.html#tutTraceMsgExample" title="Figure&nbsp;31.&nbsp;Trace-generated messages">Figure&nbsp;31, &#8220;Trace-generated messages&#8221;</a>).</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e12987"></a>Further reading</h2></div></div></div><p>To learn more about JUnit testing:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>see <a class="link" href="http://www.junit.org/" target="_top">JUnit </a></p></li></ul></div></div></div></body></html>